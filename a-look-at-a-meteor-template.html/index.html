<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>A Look at a Meteor Template - XguoX - å†™ç‚¹ Ruby ç³Šå£é¥­åƒ</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="XguoX" /><meta name="description" content="LEVEL: BEGINNER å­¦ä¹ ä¸€é—¨è¯­è¨€æˆ–æ¡†æ¶çš„æœ€å¥½æ–¹æ³•ä¹‹ä¸€æ˜¯ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªåº”ç”¨ç¨‹åº. ä½†æ˜¯,å½“ä½ å¼€å‘äº†Næ¬¡çš„To-do liståº”ç”¨ä¹‹å, æˆ–è®¸ä½ ä¼šæƒ³è¦ä¸€äº›ç¨å¾®æ–°é²œçš„" /><meta name="keywords" content="Ruby, Golang, Erlang, å‰ç«¯, åç«¯, Android, Elasticsearch, Programmer, Photo, Lens, Camera, Sony, A7r, Fujifilm, Lego" />






<meta name="generator" content="Hugo 0.54.0 with even 4.0.0" />


<link rel="canonical" href="https://xguox.me/a-look-at-a-meteor-template.html/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">


<link href="/dist/even.3eafe5cf.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="A Look at a Meteor Template" />
<meta property="og:description" content="LEVEL: BEGINNER å­¦ä¹ ä¸€é—¨è¯­è¨€æˆ–æ¡†æ¶çš„æœ€å¥½æ–¹æ³•ä¹‹ä¸€æ˜¯ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªåº”ç”¨ç¨‹åº. ä½†æ˜¯,å½“ä½ å¼€å‘äº†Næ¬¡çš„To-do liståº”ç”¨ä¹‹å, æˆ–è®¸ä½ ä¼šæƒ³è¦ä¸€äº›ç¨å¾®æ–°é²œçš„" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xguox.me/a-look-at-a-meteor-template.html/" />
<meta property="article:published_time" content="2013-03-06T16:01:23&#43;08:00"/>
<meta property="article:modified_time" content="2013-03-06T16:01:23&#43;08:00"/>

<meta itemprop="name" content="A Look at a Meteor Template">
<meta itemprop="description" content="LEVEL: BEGINNER å­¦ä¹ ä¸€é—¨è¯­è¨€æˆ–æ¡†æ¶çš„æœ€å¥½æ–¹æ³•ä¹‹ä¸€æ˜¯ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªåº”ç”¨ç¨‹åº. ä½†æ˜¯,å½“ä½ å¼€å‘äº†Næ¬¡çš„To-do liståº”ç”¨ä¹‹å, æˆ–è®¸ä½ ä¼šæƒ³è¦ä¸€äº›ç¨å¾®æ–°é²œçš„">


<meta itemprop="datePublished" content="2013-03-06T16:01:23&#43;08:00" />
<meta itemprop="dateModified" content="2013-03-06T16:01:23&#43;08:00" />
<meta itemprop="wordCount" content="3206">



<meta itemprop="keywords" content="Translation,JavaScript," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="A Look at a Meteor Template"/>
<meta name="twitter:description" content="LEVEL: BEGINNER å­¦ä¹ ä¸€é—¨è¯­è¨€æˆ–æ¡†æ¶çš„æœ€å¥½æ–¹æ³•ä¹‹ä¸€æ˜¯ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªåº”ç”¨ç¨‹åº. ä½†æ˜¯,å½“ä½ å¼€å‘äº†Næ¬¡çš„To-do liståº”ç”¨ä¹‹å, æˆ–è®¸ä½ ä¼šæƒ³è¦ä¸€äº›ç¨å¾®æ–°é²œçš„"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div class="row">
    <div class="col s12 m4">
      <div class="table cover">
        <div class="cover-card table-cell table-middle">

  <img src="/img/logo.jpeg" alt="" class="avatar">

  <a href="https://xguox.me/" class="author_name">XguoX</a>
  <span class="author_job">å†™ç‚¹ Ruby ç³Šå£é¥­åƒ</span>
  <span class="author_bio mbm"> ğŸ¨ é•¿è‰å­¦ç”»ç”» ... </span>
  <nav class="nav">
    <ul class="nav-list">
      <li class="nav-item">
        <a href="https://xguox.me/">home</a>
        <span>/</span>
      </li>

      <li class="nav-item">
        <a href="https://xguox.me/post/">Archive</a>

          <span>/</span>

      </li>

      <li class="nav-item">
        <a href="https://xguox.me/categories/">Categories</a>
      </li>

    </ul>
  </nav>

  <div class="social-links">
    <ul>
        <li><a href="mailto:xguox@hotmail.com" class="iconfont icon-email" title="email"></a></li>
        <li><a href="https://twitter.com/XguoX_L" class="iconfont icon-twitter" title="twitter"></a></li>
        <li><a href="https://github.com/xguox" class="iconfont icon-github" title="github"></a></li>
    <li>
      <a href="https://xguox.me/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
    </li>
    </ul>
  </div>

  <section id="js-search" class="p-3 p-lg-5 d-flex flex-column">
    <div class="my-auto" >
      <form action="https://xguox.me/search">
        <input id="search-query" name="s" placeholder="~$ enter to search"/>
      </form>
    </div>
  </section>
</div>
      </div>
    </div>
    <div class="col s12 m8">
      <div class="post-listing">
        
        <div class="container" id="mobile-panel">
          

          <main id="main" class="main">
            <div class="content-wrapper">
              <div id="content" class="content">
                <article class="post inner">
    <a class="home-btn" href= "https://xguox.me/" >
      Home
    </a>
    
    <header class="post-header">
      <h1 class="post-title">A Look at a Meteor Template</h1>

      <div class="post-meta">
        <span class="post-time"> 6 Mar 2013 </span>
          <span class="more-meta"> 3206 words </span>
          <span class="more-meta"> 7 mins read </span>
        
      </div>
      <div class="post-category">
          <a href="/categories/translation/"> Translation </a>
          <a href="/categories/javascript/"> JavaScript </a>
          </div>
    </header>

    
    <div class="post-content">
      

<h2 id="level-beginner">LEVEL: BEGINNER</h2>

<p>å­¦ä¹ ä¸€é—¨è¯­è¨€æˆ–æ¡†æ¶çš„æœ€å¥½æ–¹æ³•ä¹‹ä¸€æ˜¯ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªåº”ç”¨ç¨‹åº.</p>

<p>ä½†æ˜¯,å½“ä½ å¼€å‘äº†Næ¬¡çš„To-do liståº”ç”¨ä¹‹å, æˆ–è®¸ä½ ä¼šæƒ³è¦ä¸€äº›ç¨å¾®æ–°é²œçš„ç©æ„. æ‰€ä»¥è¿™ä¸€æ¬¡, è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸€äº›å®é™…çš„åº”ç”¨çš„ä»£ç , è¿™é‡Œæˆ‘ä»¬ç”¨çš„æ˜¯ <a href="http://telesc.pe/">Telescope</a></p>

<p>Telescopeæ˜¯ä¸€ä¸ªåŸºäºMeteorçš„å¼€æºç¤¾äº¤æ–°é—»ç½‘ç«™. <a href="http://reddit.com/">Reddit</a> or <a href="http://news.ycombinator.com/">Hacker News</a>çš„å®æ—¶ç‰ˆæœ¬.</p>

<p>æˆ‘ä»¬å³å°†çœ‹åˆ°çš„ä»£ç æ˜¯ç®€åŒ–ç‰ˆçš„<code>post_edit</code><a href="https://github.com/SachaG/Telescope/blob/master/client/views/posts/post_edit.html">æ¨¡æ¿</a>åŠå…¶<a href="https://github.com/SachaG/Telescope/blob/master/client/views/posts/post_edit.js">æ§åˆ¶å™¨(controller)</a>. å¬åå­—ä½ åº”è¯¥å°±çŸ¥é“, è¿™ä¸ªæ¨¡æ¿çš„ä½œç”¨æ˜¯æä¾›ä¸€ä¸ªç®€å•çš„è¡¨å•æ¥ç¼–è¾‘ä¸€ç¯‡å·²ç»å­˜åœ¨çš„post. postæœ‰æ ‡é¢˜(title), é“¾æ¥(URl), ä¸»ä½“(body), ä»¥åŠä¸€ä¸ªæˆ–å¤šä¸ªçš„ç±»åˆ«(categories). è¯¥ç¨‹åºå®é™…çš„è¡¨å•ä¸­è¿˜ä¼šæœ‰ä¸€äº›é¢å¤–çš„ä¸œè¥¿, ä½†æˆ‘ä»¬ç°åœ¨ä¸éœ€è¦å…³å¿ƒé‚£äº›.</p>

<p><img src="http://theMeteorbook.com/images/telescope-post-edit.png" alt="" /></p>

<p>è¿™ç¯‡æ–‡ç« çš„ç›®çš„æ˜¯è®©ä½ å¯¹Meteorçš„æ¨¡æ¿æœ‰ä¸ªå¤§æ¦‚çš„è®¤è¯†. å¦‚æœä½ åœ¨å…¶ä»–çš„ç¯å¢ƒä¸‹ä½¿ç”¨è¿‡æ¨¡æ¿ç³»ç»Ÿå°±ä¼šæ„Ÿåˆ°å¾ˆç†Ÿæ‚‰, å¦‚æœæ²¡çš„è¯,é‚£å°±ç°åœ¨å¼€å§‹å­¦ä¹ å§.</p>

<h2 id="basic-organization">Basic Organization</h2>

<p>Meteoræ¨¡æ¿ç³»ç»Ÿæœ‰ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆ,åˆ†åˆ«æ˜¯: HTMLæ¨¡æ¿å’ŒJavaScriptæ§åˆ¶å™¨. HTMLéƒ¨åˆ†åªæ˜¯çº¯ç²¹çš„æœ‰å˜é‡å ä½ç¬¦çš„å“‘å·´æ¨¡æ¿, æ‰€æœ‰çš„å®é™…åŠ¨ä½œéƒ½æ˜¯é€šè¿‡JavaScriptäº§ç”Ÿçš„.</p>

<p>é¡ºä¾¿è¯´å¥, Meteoré€šè¿‡<code>template</code>æ ‡ç­¾çš„<code>name</code>å±æ€§æ¥å¾—åˆ°è¿™ä¸ªæ¨¡æ¿çš„åå­—(<code>&lt;template name=&quot;post_edit&quot;&gt;</code>), å› æ­¤,å»ºè®®ä½¿ç”¨åŒä¸€åå­—å‘½åæ‰€æœ‰ç›¸å…³çš„æ–‡ä»¶å’Œæ¨¡æ¿æœ¬èº«, å¦‚åœ¨è¿™ä¸ªä¾‹å­ä¸­çš„<code>post_edit.html</code>å’Œ<code>post_edit.js</code></p>

<p>post_edit.html template</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">template</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;post_edit&#34;</span><span class="p">&gt;</span>
  \{\{#with post}}
    <span class="p">&lt;</span><span class="nt">form</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>Title<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;title&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;{{headline}}&#34;</span> <span class="p">/&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>URL<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;url&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;{{url}}&#34;</span> <span class="p">/&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>Body<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">textarea</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;body&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;input-xlarge&#34;</span><span class="p">&gt;</span>{{body}}<span class="p">&lt;/</span><span class="nt">textarea</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>Category<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        \{\{#each categories}}
          <span class="p">&lt;</span><span class="nt">label</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;checkbox inline&#34;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;category_{{_id}}&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;checkbox&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;{{_id}}&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;category&#34;</span> <span class="err">{{</span><span class="na">hasCategory</span><span class="err">}}</span> <span class="p">/&gt;</span> {{name}}
          <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        \{\{/each}}
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;form-actions&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;delete-link&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;/posts/deleted&#34;</span><span class="p">&gt;</span>Delete Post<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;Submit&#34;</span> <span class="p">/&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
  \{\{/with}}
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span></code></pre></td></tr></table>
</div>
</div>
<p>post_edit.js controller</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">Template</span><span class="p">.</span><span class="nx">post_edit</span><span class="p">.</span><span class="nx">helpers</span><span class="p">({</span>
  <span class="nx">post</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">Posts</span><span class="p">.</span><span class="nx">findOne</span><span class="p">(</span><span class="nx">Session</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;selectedPostId&#39;</span><span class="p">));</span>
  <span class="p">},</span>
  <span class="nx">categories</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">Categories</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">fetch</span><span class="p">();</span>
  <span class="p">},</span>
  <span class="nx">hasCategory</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">post</span> <span class="o">=</span> <span class="nx">Posts</span><span class="p">.</span><span class="nx">findOne</span><span class="p">(</span><span class="nx">Session</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;selectedPostId&#39;</span><span class="p">));</span>
    <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">post</span><span class="p">.</span><span class="nx">categories</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;checked&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">Template</span><span class="p">.</span><span class="nx">post_edit</span><span class="p">.</span><span class="nx">events</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;click input[type=submit]&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">selectedPostId</span> <span class="o">=</span> <span class="nx">Session</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;selectedPostId&#39;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">post</span> <span class="o">=</span> <span class="nx">Posts</span><span class="p">.</span><span class="nx">findOne</span><span class="p">(</span><span class="nx">selectedPostId</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">categories</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;input[name=category]:checked&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">categories</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">val</span><span class="p">());</span>
    <span class="p">});</span>

    <span class="kd">var</span> <span class="nx">properties</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">title</span><span class="o">:</span>         <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#title&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="nx">url</span><span class="o">:</span>           <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#url&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="nx">body</span><span class="o">:</span>          <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#body&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="nx">categories</span><span class="o">:</span>    <span class="nx">categories</span><span class="p">,</span>
    <span class="p">};</span>

    <span class="nx">Posts</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">selectedPostId</span><span class="p">,</span> <span class="p">{</span><span class="nx">$set</span><span class="o">:</span> <span class="nx">properties</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">reason</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="s1">&#39;click .delete-link&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">confirm</span><span class="p">(</span><span class="s2">&#34;Are you sure?&#34;</span><span class="p">))</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">selectedPostId</span> <span class="o">=</span> <span class="nx">Session</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;selectedPostId&#39;</span><span class="p">);</span>
      <span class="nx">Posts</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">selectedPostId</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div>
<p>ä»£ç çœ‹èµ·æ¥å¾ˆå¤š, ä½†æ˜¯åªè¦æ‹†å¼€æ¥çœ‹,å³ä½¿ä½ ä»æœªçœ‹è¿‡Meteorçš„ä»£ç ä¹Ÿä¼šè§‰å¾—å¾ˆå®¹æ˜“.</p>

<h2 id="handlebars-tags">Handlebars Tags</h2>

<p>é¦–å…ˆæ¥å¿«é€Ÿæµè§ˆä¸‹HTMLéƒ¨åˆ†. ä½ ä¸€å®šæ³¨æ„åˆ°è¿™ç§å¥‡æ€ªçš„æ ‡ç­¾ç”¨æ³•äº†å§. è¿™äº›éƒ½æ˜¯<a href="http://handlebarsjs.com/">Handlebars</a>æ ‡ç­¾ç”¨æ¥è®©æˆ‘ä»¬å±•ç¤ºåŠ¨æ€æ•°æ®.
å…ˆæ¥çœ‹ç¬¬ä¸€ä¸ª handlebars æ ‡ç­¾ <code>\{\{#with post}}</code></p>

<p>The &ldquo;with&rdquo; block helper</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">template</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;post_edit&#34;</span><span class="p">&gt;</span>
  \{\{#with post}}
    <span class="c">&lt;!-- do something with &#34;post&#34; --&gt;</span>
  \{\{/with}}
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span></code></pre></td></tr></table>
</div>
</div>
<p><a href="http://handlebarsjs.com/block_helpers.html">block helper</a>æ˜¯ä¸€ç§å¿«æ·çš„æ–¹å¼å‘Šè¯‰æˆ‘ä»¬è¦åœ¨å“ªä¸ªæ¨¡æ¿å¯¹è±¡ä¸Šå·¥ä½œ. åœ¨<code>\{\{#with post}}</code>blocké‡Œ, æˆ‘ä»¬çš„åº”ç”¨çŸ¥é“<code>this</code>ä»£è¡¨ä¸€ä¸ª<code>post</code>. <code>this</code>ä¹Ÿæ˜¯ä¼ è¯´ä¸­æ–¹æ³•çš„ä¸Šä¸‹æ–‡.</p>

<h2 id="template-helpers">Template Helpers</h2>

<p>ä½ å¯èƒ½ä¼šå¥½å¥‡,æˆ‘ä»¬æ˜¯ä»å“ªé‡Œå¾—åˆ°<code>post</code>, æ‰¾åˆ°ä½ çš„controlleré‡Œçš„</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">//The &#34;post&#34; template helper
</span><span class="c1"></span>
<span class="nx">Template</span><span class="p">.</span><span class="nx">post_edit</span><span class="p">.</span><span class="nx">helpers</span><span class="p">({</span>
  <span class="nx">post</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">Posts</span><span class="p">.</span><span class="nx">findOne</span><span class="p">(</span><span class="nx">Session</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;selectedPostId&#39;</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div>
<p>åœ¨è¿™æˆ‘ä»¬è¦åšçš„æ˜¯æ·»åŠ ä¸€ä¸ª<code>post</code><a href="http://docs.Meteor.com/#template_helpers">Template Helper</a>åˆ°æˆ‘ä»¬çš„<code>post_edit</code>æ¨¡æ¿. Template helpers æ˜¯ä¸€äº›ç®€å•çš„JavaScriptæ–¹æ³•å…è®¸ä½ ä½¿ç”¨ Handlebars template.</p>

<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­,ä¸ç®¡ä»»ä½•æ—¶å€™æˆ‘ä»¬çš„Handlebarsæ¨¡æ¿è°ƒç”¨<code>post</code>, æˆ‘ä»¬éƒ½èƒ½åœ¨æˆ‘ä»¬çš„<code>Posts</code> collection ä¸­æ‰¾åˆ°current postå¹¶è¿”å›ä¹‹. è¦åšåˆ°è¿™æ ·é¦–å…ˆæˆ‘ä»¬éœ€è¦ç”¨åˆ°<code>selectedPostId</code>è¿™ä¸ªé€šè¿‡è·¯ç”±è®¾ç½®çš„Sessionå˜é‡(but that&rsquo;s for another lesson)</p>

<h2 id="object-properties">Object Properties</h2>

<p>ç»§ç»­å¾€ä¸‹, æˆ‘ä»¬å°†çœ‹åˆ°ç¬¬äºŒä¸ªhandlebarsæ ‡ç­¾<code>{{title}}</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html">//The &#34;title&#34; template helper
<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>Title<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;title&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;{{title}}&#34;</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></code></pre></td></tr></table>
</div>
</div>
<p>å°½ç®¡ä¸èƒ½ç”¨ä»€ä¹ˆæ–¹å¼å‘Šè¯‰ä½ è¿™ä¸ª<code>{{title}}</code>ä¸æ˜¯ä¸€ä¸ªTemplate helper, è€Œæ˜¯æˆ‘ä»¬çš„<code>post</code>å¯¹è±¡çš„å±æ€§ä¹‹ä¸€. æ— é¡»ä»»ä½•å…¶ä»–çš„å·¥ä½œ,Meteorå¾ˆç¥å¥‡åœ°æä¾›ç»™äº†æˆ‘ä»¬ä½¿ç”¨çš„.</p>

<h2 id="nested-objects">Nested Objects</h2>

<p>é“¾æ¥(URL)å’Œä¸»ä½“(Body)è¡¨å•åŸŸç”¨çš„éƒ½æ˜¯ç›¸åŒçš„æ¨¡å¼, è€Œç±»åˆ«(Category)åŸŸåˆ™æœ‰äº›ä¸åŒäº†.åœ¨è¿™é‡Œ, æˆ‘ä»¬å¸Œæœ›é€šè¿‡ç±»åˆ«æ£€æŸ¥å±•ç¤ºä¸€ç³»åˆ—å¤é€‰æ¡†ç»™æ‰€æœ‰ç½‘ç«™çš„é¢„å®šä¹‰ç±»åˆ«.</p>

<p>é¦–å…ˆçš„å·¥ä½œæ˜¯å‡†å¤‡ä¸€ç³»åˆ—çš„ç±»åˆ«é€‰æ‹©, æˆ‘ä»¬é€šè¿‡<code>\{\{#each categories}}</code>è¿™ä¸ªblock helperæ¥å®Œæˆ:</p>

<p>Looping over categories with the &ldquo;each&rdquo; helper</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>Category<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
  \{\{#each categories}}
    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;checkbox inline&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;category_{{_id}}&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;checkbox&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;{{_id}}&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;category&#34;</span> <span class="err">{{</span><span class="na">hasCategory</span><span class="err">}}</span> <span class="p">/&gt;</span> {{name}}
    <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
  \{\{/each}}
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></code></pre></td></tr></table>
</div>
</div>
<p>è¿™ä¸ªhelperå®Œæˆäº†ä¸¤ä»¶äº‹: éå†<code>categories</code>å¯¹è±¡, ä»¥åŠåœ¨ä»£ç å—é‡Œä½¿ç”¨<code>this</code>æ¥è¡¨ç¤ºæ¯ä¸€ä¸ªéå†ç»“æœ.</p>

<p>æˆ–è®¸ä½ å·²ç»çŒœåˆ°, <code>categories</code>åƒ<code>posts</code>é‚£æ ·æ˜¯ä¸€ä¸ªTemplate helper. åœ¨è¿™ä¸ªä¾‹å­ä¸­,æˆ‘ä»¬åªè¿”å›äº†åœ¨æˆ‘ä»¬çš„æ•°æ®åº“ä¸­çš„ä¸€ç³»åˆ—ç±»åˆ«(categories)</p>

<p>The &ldquo;categories&rdquo; template helper</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript">  <span class="nx">categories</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">Categories</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
  <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<p>è¿˜è®°å¾—æˆ‘è¯´è¿‡block helper ä¼šæ”¹å˜<code>this</code>çš„å€¼å—?è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬èƒ½çœ‹åˆ°<code>{{_id}}</code>è€Œä¸ä¼šæ··ä¹±. å› ä¸ºè¿™äº‹åœ¨block helperé‡Œè¾¹, å› æ­¤å¯ä»¥çŸ¥é“,æˆ‘ä»¬å¤„ç†çš„æ˜¯categoryçš„ID,è€Œä¸æ˜¯postçš„ID</p>

<h2 id="more-helpers">More Helpers</h2>

<p>åˆ°ç›®å‰ä¸ºæ­¢, æˆ‘ä»¬çš„helperç®€å•åœ°æŸ¥è¯¢äº†æˆ‘ä»¬çš„collectionså¹¶è¿”å›äº†æ•°æ®. ä½†helperå´ä¸ä»…é™äºæ­¤. è®©æˆ‘ä»¬ä¸€èµ·çœ‹ä¸€çœ‹ <code>{{hasCategory}}</code>è¿™ä¸ªhelper</p>

<p>The &ldquo;hasCategory&rdquo; template helper</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">hasCategory</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">post</span> <span class="o">=</span> <span class="nx">Posts</span><span class="p">.</span><span class="nx">findOne</span><span class="p">(</span><span class="nx">Session</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;selectedPostId&#39;</span><span class="p">));</span>
  <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">post</span><span class="p">.</span><span class="nx">categories</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;checked&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<p>è¿˜è®°å¾—å§, æˆ‘ä»¬æ˜¯åœ¨block <code>\{\{#each categories}}</code>é‡Œè°ƒç”¨äº†è¿™ä¸ªhelper, è¿™å°±æ„å‘³ç€è¿™é‡Œ<code>this</code>è¡¨ç¤ºçš„æ˜¯category</p>

<p>é‚£ä¹ˆæˆ‘ä»¬ç°åœ¨æ˜¯é¦–æ¬¡å¾—åˆ°æˆ‘ä»¬çš„current postå¯¹è±¡, ç„¶åæ£€æŸ¥çœ‹current categoryæ˜¯å¦åŒ…å«åœ¨è¿™ä¸ªpostçš„categoriesé‡Œ.å¦‚æœåŒ…å«æœ‰, åˆ™æˆ‘ä»¬å¾ˆå®¹æ˜“åœ°è¿”å›&rdquo;checked&rdquo;å­—ç¬¦ä¸²ç”¨ä»¥æ ‡è®°æˆ‘ä»¬è¿™ä¸ªå¤é€‰æ¡†è¢«é€‰ä¸­.</p>

<p>ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°, <code>_.contains()</code>æ˜¯ä¸€ä¸ª <a href="http://underscorejs.org/">Underscore</a>æ–¹æ³•. Underscoreæ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„JavaScriptå·¥å…·åŒ…å¹¶è¢«å†…ç½®ç»‘å®šåˆ°äº†Meteoré‡Œè¾¹.</p>

<h2 id="template-events">Template Events</h2>

<p>æˆ‘ä»¬ç°åœ¨çš„ä»£ç è¶³å¤Ÿç”¨æ¥åŠ è½½ä¸€ç¯‡postçš„æ ‡é¢˜,URL,ä¸»ä½“,ä»¥åŠç±»åˆ«äº†. ä½†è¿˜æ˜¯éœ€è¦ä¸€ç§ä¿å­˜è¿™ä¸ªè¡¨å•çš„æ–¹æ³•. ä¹Ÿå°±æ˜¯ä¸‹é¢çš„æ¨¡æ¿äº‹ä»¶(template events)</p>

<p>Template events</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">Template</span><span class="p">.</span><span class="nx">post_edit</span><span class="p">.</span><span class="nx">events</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;click input[type=submit]&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something when the users clicks input[type=submit]
</span><span class="c1"></span>  <span class="p">},</span>
  <span class="s1">&#39;click .delete-link&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something when the users clicks .delete-link
</span><span class="c1"></span>  <span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div>
<p>å¦‚ä½ æ‰€è§, å®šä¹‰ template eventså…¶å®å°±æ˜¯ç®€å•æŠŠäº‹ä»¶å’ŒCSSé€‰æ‹©å™¨æ”¾åœ¨ä¸€èµ·. åœ¨è¿™é‡Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªå¤„ç†ç›‘å¬,ä¸€ä¸ªæ˜¯æäº¤è¡¨å•,å¦ä¸€ä¸ªæ˜¯åˆ é™¤post.
å…ˆæ¥çœ‹çœ‹è¡¨å•æäº¤å¤„ç†:</p>

<p>Our form submit handler</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="s1">&#39;click input[type=submit]&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

  <span class="kd">var</span> <span class="nx">selectedPostId</span> <span class="o">=</span> <span class="nx">Session</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;selectedPostId&#39;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">post</span> <span class="o">=</span> <span class="nx">Posts</span><span class="p">.</span><span class="nx">findOne</span><span class="p">(</span><span class="nx">selectedPostId</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">categories</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;input[name=category]:checked&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">categories</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">val</span><span class="p">());</span>
  <span class="p">});</span>

  <span class="kd">var</span> <span class="nx">properties</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">title</span><span class="o">:</span>         <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#title&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
    <span class="nx">url</span><span class="o">:</span>           <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#url&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
    <span class="nx">body</span><span class="o">:</span>          <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#body&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
    <span class="nx">categories</span><span class="o">:</span>    <span class="nx">categories</span><span class="p">,</span>
  <span class="p">};</span>

  <span class="nx">Posts</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">selectedPostId</span><span class="p">,</span> <span class="p">{</span><span class="nx">$set</span><span class="o">:</span> <span class="nx">properties</span><span class="p">});</span>
<span class="p">},</span>
</code></pre></td></tr></table>
</div>
</div>
<p>å¤„ç†æ–¹æ³•å¸¦æœ‰ä¸¤ä¸ªå‚æ•°, event å’Œ template å®ä¾‹. ç°åœ¨, æˆ‘ä»¬å¯ä»¥å¿½ç•¥template å®ä¾‹. ä½¿ç”¨<code>e.preventDefault();</code>æ¥å¼€å§‹ä½ çš„å¤„ç†å¯ä»¥å¾ˆå¥½çš„é˜»æ­¢æµè§ˆå™¨æ‰§è¡Œé»˜è®¤çš„äº‹ä»¶è¡Œä¸º.</p>

<p>å¦‚ä½ æ‰€è§, è¿™é‡Œæœ‰å¤§é‡çš„<code>$</code>ç¬¦å·. é™¤äº†Underscore, Meteorè¿˜ç»‘å®šäº†jQuery. çœ‹å§, ä½ å·²ç»äº†è§£äº†Meteorçš„ä¸€åŠäº†.</p>

<p>å†æ¥ä¸€æ¬¡, å¤„ç†categoriesç›¸è¾ƒäºå…¶ä»–çš„æ¥è¯´æ¯”è¾ƒéº»çƒ¦ä¸€äº›.  é€šè¿‡ä½¿ç”¨jQuery, we&rsquo;re checking for checked checkboxes(æ•¢ä¸æ•¢æŠŠè¿™å¥è¯è¯´ä¸Š10æ¬¡,LOL)å¹¶ä½¿ç”¨ä»–ä»¬çš„IDæ¥å¡«å……ç»™ä¸€ä¸ªæ•°ç»„.</p>

<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±èƒ½å¤Ÿå»ºç«‹æˆ‘ä»¬çš„å±æ€§å¯¹è±¡, å¹¶ä½¿ç”¨Meteorçš„<a href="http://docs.Meteor.com/#update">update()</a>å¯ä»¥ç®€å•åœ°æäº¤æˆ‘ä»¬çš„ä¿®æ”¹ç»™æ•°æ®åº“.</p>

<p>åˆ é™¤postæ›´æ˜¯ç®€å•
Our post delete handler</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="s1">&#39;click .delete-link&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">confirm</span><span class="p">(</span><span class="s2">&#34;Are you sure?&#34;</span><span class="p">))</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">selectedPostId</span> <span class="o">=</span> <span class="nx">Session</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;selectedPostId&#39;</span><span class="p">);</span>
    <span class="nx">Posts</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">selectedPostId</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<p>åªéœ€è¦ç®€å•åœ°æŠŠè¦åˆ é™¤çš„IDä¼ é€ç»™Meteorçš„<a href="http://docs.Meteor.com/#remove">remove()</a>æ–¹æ³•å°±æå®š.</p>

<h2 id="other-callbacks">Other Callbacks</h2>

<p>Meteorç»™ç®¡ç†æ¨¡æ¿æä¾›äº†ä¸€äº›å…¶ä»–çš„å›è°ƒ, æ¯”å¦‚<a href="http://docs.Meteor.com/#template_created">created</a>å’Œ<a href="http://docs.Meteor.com/#template_rendered">render</a>å›è°ƒ</p>

<p>å°½ç®¡æˆ‘ä»¬åœ¨è¿™é‡Œæ²¡æœ‰ä½¿ç”¨åˆ°, ä½†åªè¦Meteorå®Œæˆæ¸²æŸ“ä¸€ä¸ªæ¨¡æ¿, é‚£ä¹ˆ<code>rendered</code>å›è°ƒå¯ä»¥å¾ˆå®¹æ˜“çš„é€šè¿‡jQueryæ¥åšä¸€äº›DOMæ“ä½œ.</p>

<h2 id="conclusion">Conclusion</h2>

<p>CRUD (Create, Read, Update, Delete)æ“ä½œç»å¸¸å°±æ˜¯ç»„æˆç½‘ç«™çš„ä¸»è¦åŠŸèƒ½. Meteorèƒ½å¦‚æ­¤ç®€å•çš„å®Œæˆè¿™äº›å·¥ä½œæ˜¾ç„¶æ˜¯è¦å¤§åŠ åˆ†çš„.</p>

<p>æ›´é‡è¦çš„æ˜¯, Meteorä»£ç æ‰€ä¾èµ–çš„å¾ˆå¤šæ¨¡å¼å’Œåº“éƒ½æ˜¯ä½ æ‰€ç†Ÿæ‚‰çš„.è¿™æ„å‘³ç€å¯ä»¥éå¸¸å¿«çš„æŒæ¡,åªéœ€è¦ä¸€äº›JavaScriptçŸ¥è¯†.</p>

<p>å½“ç„¶,éšç€æ‚¨çš„éœ€æ±‚çš„å‘å±•,ä½ éœ€è¦æ·±å…¥æŒ–æ˜è¿™ä¸ªæ¡†æ¶çš„å¤æ‚æ€§.ä½†æ˜¯å³ä½¿ä½ åªçŸ¥é“Meteoræœ€åŸºæœ¬çš„åŠŸèƒ½ä½ ä¹ŸåŒæ ·èƒ½ä½œå‡ºä¸€äº›ä¸œè¥¿æ¥, æˆ‘æƒ³,è¿™å¤§æ¦‚å°±æ˜¯ä¸ºä»€ä¹ˆMeteoréå¸¸å¥½ç©çš„åŸå› ä¹‹ä¸€.</p>

<p>åŸæ–‡æ¥è‡ª Sacha Greif  <a href="http://theMeteorbook.com/2013/02/20/a-look-at-a-Meteor-template/">A Look at a Meteor Template</a></p>

    </div>

    <footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/translation/">Translation</a>
          <a href="/tags/javascript/">JavaScript</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/learn-meteor-fundamentals-and-best-practices.html/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Meteor åŸºç¡€ä¸æœ€ä½³å®è·µ</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/getting-started-with-meteor.html/">
            <span class="next-text nav-default">Getting Started with Meteor</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
              </div>
              <div id="disqus_thread"></div>
    <script type="text/javascript">
    (function() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'xguox';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

            </div>
          </main>

          <footer id="footer" class="footer">
            <div class="social-links">
      <a href="mailto:xguox@hotmail.com" class="iconfont icon-email" title="email"></a>
      <a href="https://twitter.com/XguoX_L" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://github.com/xguox" class="iconfont icon-github" title="github"></a>
  <a href="https://xguox.me/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme -
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy;
    2011 -
    2019
    <span class="heart">
      <i class="iconfont icon-bulb"></i>
    </span>
    <span class="author">XguoX</span>
  </span>
</div>
          </footer>

          <div class="back-to-top" id="back-to-top">
            <i class="iconfont icon-up"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
<script type="text/javascript" src="/dist/even.733a52a9.min.js"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-62252083-1', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>







</body>
</html>
